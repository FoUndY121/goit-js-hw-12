{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/js/gallery-randomizer.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n/**\n * @param {Array} images\n * @returns {string}\n */\nexport function createMarkup(images) {\n  return images\n    .map(\n      ({\n         webformatURL,\n         largeImageURL,\n         tags,\n         likes,\n         views,\n         comments,\n         downloads,\n       }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"thumb-block\">\n          <div class=\"block\"><h2 class=\"title\">Likes</h2><p class=\"amount\">${likes}</p></div>\n          <div class=\"block\"><h2 class=\"title\">Views</h2><p class=\"amount\">${views}</p></div>\n          <div class=\"block\"><h2 class=\"title\">Comments</h2><p class=\"amount\">${comments}</p></div>\n          <div class=\"block\"><h2 class=\"title\">Downloads</h2><p class=\"amount\">${downloads}</p></div>\n        </div>\n      </li>`\n    )\n    .join('');\n}\n\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\n/**\n * @param {Array} images\n * @param {boolean} isNewSearch\n */\nexport function renderGallery(images, isNewSearch = false) {\n  if (isNewSearch) {\n    clearGallery();\n  }\n  gallery.insertAdjacentHTML('beforeend', createMarkup(images));\n  refreshLightbox();\n}\n\n\nexport function refreshLightbox() {\n  lightbox.refresh();\n}\n\n\nexport function scrollToNewImages() {\n  const lastItem = gallery.lastElementChild;\n  if (lastItem) {\n    lastItem.scrollIntoView({ behavior: 'smooth', block: 'end' });\n  }\n}","import axios from 'axios';\n\nconst API_KEY = '49393685-3ee93529131780612454ef79e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getPictures(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response?.data?.message || 'Failed to fetch images');\n  }\n}","function randomizeGalleryItems() {\n  const galleryItems = document.querySelectorAll('.gallery-item');\n\n  galleryItems.forEach(item => {\n    item.style.width = '';\n\n    const randomWidth = Math.floor(Math.random() * (450 - 275 + 1)) + 275;\n    item.style.width = `${randomWidth}px`;\n  });\n}\n\nexport { randomizeGalleryItems };","import iziToast from 'izitoast';\nimport { createMarkup, refreshLightbox, scrollToNewImages } from './js/render-functions';\nimport { getPictures } from './js/pixabay-api';\nimport { randomizeGalleryItems } from './js/gallery-randomizer';\n\nconst formSearch = document.querySelector('.form');\nconst listImages = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.btn2');\n\nlet page = 1;\nlet query = '';\nconst perPage = 15;\n\nloader.style.display = 'none';\nbtnLoadMore.classList.add('is-hidden');\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nasync function onSearch(event) {\n  event.preventDefault();\n  listImages.innerHTML = '';\n  showLoader();\n  btnLoadMore.classList.add('is-hidden');\n\n  query = event.target.elements['search-text'].value.trim();\n  page = 1;\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Input cannot be empty!',\n      color: '#ff0000',\n    });\n    hideLoader();\n    return;\n  }\n\n  try {\n    const data = await getPictures(query, page);\n    hideLoader();\n\n    if (!data.hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    listImages.innerHTML = createMarkup(data.hits);\n    randomizeGalleryItems();\n    refreshLightbox();\n\n    if (data.totalHits > page * perPage) {\n      btnLoadMore.classList.remove('is-hidden');\n    }\n\n    formSearch.reset();\n  } catch (error) {\n    hideLoader();\n    iziToast.error({ title: 'Error', message: error.message });\n  }\n}\n\nasync function onLoadMore() {\n  showLoader();\n  page++;\n\n  try {\n    const data = await getPictures(query, page);\n    hideLoader();\n\n    if (!data.hits.length || data.hits.length < perPage) {\n      btnLoadMore.classList.add('is-hidden');\n      btnLoadMore.removeEventListener('click', onLoadMore);\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    listImages.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    randomizeGalleryItems();\n    refreshLightbox();\n    scrollToNewImages(); // Прокрутка к загруженным изображениям\n  } catch (error) {\n    hideLoader();\n    iziToast.error({ title: 'Error', message: error.message });\n  }\n}\n\nformSearch.addEventListener('submit', onSearch);\nbtnLoadMore.addEventListener('click', onLoadMore);"],"names":["gallery","lightbox","SimpleLightbox","createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refreshLightbox","scrollToNewImages","lastItem","API_KEY","BASE_URL","getPictures","query","page","axios","error","_b","_a","randomizeGalleryItems","item","randomWidth","formSearch","listImages","loader","btnLoadMore","perPage","showLoader","hideLoader","onSearch","event","iziToast","data","onLoadMore"],"mappings":"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"}